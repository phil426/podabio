<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    <title>Podcast Player</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/player.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous">
</head>
<body>
    <!-- Tab Navigation -->
    <nav class="tab-navigation" id="tab-navigation">
        <button class="tab-button active" data-tab="now-playing" id="tab-now-playing">Now Playing</button>
        <button class="tab-button" data-tab="details" id="tab-details">Details</button>
        <button class="tab-button" data-tab="episodes" id="tab-episodes">Episodes</button>
    </nav>

    <!-- Tab Content Container -->
    <div class="tab-content-container" id="tab-content-container">
        <!-- Now Playing Tab -->
        <div class="tab-panel active" id="now-playing-panel">
            <div class="now-playing-content">
                <!-- Full Width Cover Artwork -->
                <div class="episode-artwork-fullwidth" id="now-playing-artwork-container">
                    <img class="episode-artwork-large" id="now-playing-artwork" src="" alt="Episode Artwork" style="display: none;">
                    <div class="artwork-placeholder" id="artwork-placeholder">
                        <i class="fas fa-music"></i>
                    </div>
                </div>

                <!-- Player Controls (Below Artwork) -->
                <div class="player-controls-section">
                    <!-- Episode Information -->
                    <div class="episode-info-section">
                        <h1 class="episode-title-large" id="now-playing-title">Select an episode to play</h1>
                        <p class="podcast-name-large" id="now-playing-podcast">Podcast Name</p>
                        <div class="duration-badge-large" id="duration-badge-large" style="display: none;">0:00</div>
                    </div>

                    <!-- Progress Bar -->
                    <div class="progress-section-large">
                        <div class="time-display">
                            <span class="current-time-display" id="current-time-display">0:00</span>
                            <span class="total-time-display" id="total-time-display">0:00</span>
                        </div>
                        <div class="progress-bar-now-playing" id="progress-bar-now-playing">
                            <div class="progress-fill-now-playing" id="progress-fill-now-playing"></div>
                            <div class="progress-scrubber-now-playing" id="progress-scrubber-now-playing"></div>
                        </div>
                    </div>

                    <!-- Primary Controls -->
                    <div class="primary-controls">
                        <button class="control-button-large skip-back-large" id="skip-back-large" aria-label="Skip back 15 seconds">
                            <span class="skip-label-large">15</span>
                            <i class="fas fa-backward"></i>
                        </button>
                        <button class="control-button-large play-pause-large-now" id="play-pause-large-now" aria-label="Play/Pause">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="control-button-large skip-forward-large" id="skip-forward-large" aria-label="Skip forward 30 seconds">
                            <span class="skip-label-large">30</span>
                            <i class="fas fa-forward"></i>
                        </button>
                    </div>

                    <!-- Secondary Controls Bar -->
                    <div class="secondary-controls-bar">
                        <button class="secondary-control-btn speed-control-btn" id="speed-control-btn" aria-label="Playback Speed">
                            <span id="speed-display">1x</span>
                        </button>
                        <button class="secondary-control-btn timer-control-btn" id="timer-control-btn" aria-label="Sleep Timer">
                            <i class="fas fa-moon"></i>
                            <span id="timer-display">Off</span>
                        </button>
                        <button class="secondary-control-btn share-control-btn" id="share-control-btn" aria-label="Share">
                            <i class="fas fa-share-alt"></i>
                        </button>
                        <button class="secondary-control-btn more-control-btn" id="more-control-btn" aria-label="More Options">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Details Tab -->
        <div class="tab-panel" id="details-panel">
            <div class="details-content">
                <!-- Show Notes Section -->
                <div class="details-section" id="shownotes-section">
                    <h2 class="section-title">Show Notes</h2>
                    <div class="shownotes-content" id="shownotes-content">
                        <p class="empty-message">No episode selected</p>
                    </div>
                </div>

                <!-- Chapters Section -->
                <div class="details-section" id="chapters-section" style="display: none;">
                    <h2 class="section-title">Chapters</h2>
                    <div class="chapters-list" id="chapters-list">
                        <div class="empty-state">No chapters available</div>
                    </div>
                </div>

                <!-- Follow & Share Section -->
                <div class="details-section" id="follow-section">
                    <h2 class="section-title">Follow & Share</h2>
                    <div id="follow-content">
                        <!-- Follow content will be inserted here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Episodes Tab -->
        <div class="tab-panel" id="episodes-panel">
            <div class="episodes-content">
                <!-- Loading Skeleton -->
                <div class="loading-skeleton" id="loading-skeleton">
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                    <div class="skeleton-item"></div>
                </div>
                
                <!-- Episodes List -->
                <div class="episodes-list" id="episodes-list" style="display: none;">
                    <!-- Episodes will be inserted here -->
                </div>
                
                <!-- Error State -->
                <div class="error-state" id="error-state" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>Failed to load episodes</p>
                    <button class="retry-button" id="retry-button">Retry</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Drawer (Modal) -->
    <div class="share-drawer" id="share-drawer" style="display: none;">
        <div class="drawer-backdrop" id="share-backdrop"></div>
        <div class="drawer-content">
            <div class="drag-handle"></div>
            <h3 class="drawer-title">Share Episode</h3>
            <div class="share-platforms" id="share-platforms">
                <!-- Share buttons will be inserted here -->
            </div>
            <button class="cancel-button" id="share-cancel">Cancel</button>
        </div>
    </div>

    <!-- Speed Selector Modal -->
    <div class="speed-modal" id="speed-modal" style="display: none;">
        <div class="modal-backdrop-speed" id="speed-backdrop"></div>
        <div class="speed-container">
            <h3 class="speed-title">Playback Speed</h3>
            <div class="speed-options" id="speed-options">
                <!-- Speed options will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Timer Selector Modal -->
    <div class="timer-modal" id="timer-modal" style="display: none;">
        <div class="modal-backdrop-speed" id="timer-backdrop"></div>
        <div class="speed-container">
            <h3 class="speed-title">Sleep Timer</h3>
            <div class="speed-options" id="timer-options">
                <!-- Timer options will be inserted here -->
            </div>
        </div>
    </div>


    <!-- Full Player Modal -->
    <div class="full-player-modal" id="full-player-modal" style="display: none;">
        <div class="modal-backdrop" id="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-drag-handle"></div>
            <div class="modal-artwork-container">
                <img class="modal-artwork" id="modal-artwork" src="" alt="Episode Artwork" style="display: none;">
                <div class="modal-artwork-placeholder" id="modal-artwork-placeholder">
                    <i class="fas fa-music"></i>
                </div>
            </div>
            <div class="modal-episode-info">
                <h2 class="modal-episode-title" id="modal-episode-title">Episode Title</h2>
                <p class="modal-podcast-name" id="modal-podcast-name">Podcast Name</p>
                <div class="modal-duration-badge" id="modal-duration-badge" style="display: none;">0:00</div>
            </div>
            <div class="modal-progress-section">
                <div class="modal-time-display">
                    <span class="modal-current-time" id="modal-current-time">0:00</span>
                    <span class="modal-total-time" id="modal-total-time">0:00</span>
                </div>
                <div class="modal-progress-bar" id="modal-progress-bar">
                    <div class="modal-progress-fill" id="modal-progress-fill"></div>
                    <div class="modal-progress-scrubber" id="modal-progress-scrubber"></div>
                </div>
            </div>
            <div class="modal-primary-controls">
                <button class="modal-skip-back" id="modal-skip-back" aria-label="Skip back 15 seconds">
                    <span class="skip-label">15</span>
                    <i class="fas fa-backward"></i>
                </button>
                <button class="modal-play-pause" id="modal-play-pause" aria-label="Play/Pause">
                    <i class="fas fa-play"></i>
                </button>
                <button class="modal-skip-forward" id="modal-skip-forward" aria-label="Skip forward 30 seconds">
                    <span class="skip-label">30</span>
                    <i class="fas fa-forward"></i>
                </button>
            </div>
            <div class="modal-secondary-controls">
                <button class="modal-speed-control" id="modal-speed-control" aria-label="Playback Speed">
                    <span id="modal-speed-display">1x</span>
                </button>
                <button class="modal-timer-control" id="modal-timer-control" aria-label="Sleep Timer">
                    <i class="fas fa-moon"></i>
                    <span id="modal-timer-display">Off</span>
                </button>
                <button class="modal-share-control" id="modal-share-control" aria-label="Share">
                    <i class="fas fa-share-alt"></i>
                </button>
            </div>
            <div class="modal-tabs">
                <button class="modal-tab active" data-modal-tab="shownotes" id="modal-tab-shownotes">Show Notes</button>
                <button class="modal-tab" data-modal-tab="chapters" id="modal-tab-chapters">Chapters</button>
                <button class="modal-tab" data-modal-tab="episodes" id="modal-tab-episodes">Episodes</button>
            </div>
            <div class="modal-tab-content" id="modal-tab-content">
                <div class="modal-tab-panel active" id="modal-shownotes-panel">
                    <div class="modal-shownotes" id="modal-shownotes">
                        <p class="empty-message">No show notes available</p>
                    </div>
                </div>
                <div class="modal-tab-panel" id="modal-chapters-panel">
                    <div class="modal-chapters-list" id="modal-chapters-list">
                        <div class="empty-state">No chapters available</div>
                    </div>
                </div>
                <div class="modal-tab-panel" id="modal-episodes-panel">
                    <div class="modal-episodes-list" id="modal-episodes-list">
                        <!-- Episodes will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast" style="display: none;">
        <span id="toast-message"></span>
    </div>

    <!-- Audio Element -->
    <audio id="audio-player" preload="metadata"></audio>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/rss-parser.js"></script>
    <script src="js/player.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
